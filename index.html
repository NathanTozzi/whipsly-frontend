<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whipsly - Smart Car Search</title>
    <link rel="icon" type="image/png" href="assets/whipsly-logo-transparent.png">
    <meta property="og:image" content="assets/whipsly-logo-full.png">
    <meta property="og:title" content="Whipsly - Smart Car Search">
    <meta property="og:description" content="Find your perfect car with powerful filters and real-time insights">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-new">
                        <img src="assets/whipsly-logo-full.png" alt="Whipsly" class="logo-image">
                    </div>
                    <div class="brand-info">
                        <p class="brand-tagline">Smart car search made simple</p>
                    </div>
                </div>
                
                <div class="header-actions">
                    <button class="favorites-btn" id="favoritesBtn">
                        <i data-lucide="heart"></i>
                        Favorites (<span id="favoritesCount">0</span>)
                    </button>
                    <button class="signin-btn">Sign In</button>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <div class="hero-content">
                <h2 class="hero-title">Find Your Perfect Car</h2>
                <p class="hero-subtitle">Search the entire market with powerful filters and real-time insights</p>
                
                <!-- Search Bar -->
                <div class="search-container">
                    <div class="search-bar">
                        <i data-lucide="search" class="search-icon"></i>
                        <input 
                            type="text" 
                            placeholder="Search by make, model, or year..."
                            class="search-input"
                            id="searchInput"
                            autocomplete="off"
                        >
                        <div class="search-loading" id="searchLoading" style="display: none;"></div>
                        <button class="filter-toggle" id="filterToggle">
                            <i data-lucide="filter"></i>
                        </button>
                        <button class="mobile-filter-toggle" id="mobileFilterToggle" style="display: none;">
                            <i data-lucide="sliders-horizontal"></i>
                            <span>Filters</span>
                        </button>
                    </div>
                    
                    <!-- Search Autocomplete Dropdown -->
                    <div class="search-dropdown" id="searchDropdown" style="display: none;">
                        <div class="search-suggestions">
                            <div class="suggestion-group">
                                <div class="suggestion-title">Popular Searches</div>
                                <div class="suggestions-list" id="popularSuggestions"></div>
                            </div>
                            <div class="suggestion-group">
                                <div class="suggestion-title">Recent Searches</div>
                                <div class="suggestions-list" id="recentSuggestions"></div>
                            </div>
                            <div class="suggestion-group" id="autocompleteSuggestions" style="display: none;">
                                <div class="suggestion-title">Suggestions</div>
                                <div class="suggestions-list" id="autocompleteList"></div>
                            </div>
                            <div class="suggestion-group" id="didYouMean" style="display: none;">
                                <div class="suggestion-title">Did you mean?</div>
                                <div class="suggestions-list" id="spellingSuggestions"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Enhanced Filters -->
    <section class="filters-section" id="filtersSection" style="display: none;">
        <div class="container">
            <div class="filters-header">
                <h3 class="filters-title">Advanced Filters</h3>
                <div class="filter-actions">
                    <span class="active-filter-count" id="activeFilterCount" style="display: none;">0 filters active</span>
                    <button class="clear-filters-btn" id="clearFiltersBtn">Clear All</button>
                </div>
            </div>
            
            <div class="filter-categories">
                <!-- Price & Financial -->
                <div class="filter-category">
                    <h4 class="filter-category-title">
                        <i data-lucide="dollar-sign" class="filter-category-icon"></i>
                        Price & Financing
                    </h4>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label>Min Price</label>
                            <input type="number" placeholder="$0" id="minPrice">
                        </div>
                        <div class="filter-group">
                            <label>Max Price</label>
                            <input type="number" placeholder="$100,000" id="maxPrice">
                        </div>
                        <div class="filter-group">
                            <label>Monthly Payment</label>
                            <div class="range-slider">
                                <input type="range" id="monthlyPaymentRange" min="0" max="2000" value="1000">
                                <div class="range-values">
                                    <span>$0</span>
                                    <span id="monthlyPaymentValue">$1,000</span>
                                    <span>$2,000+</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vehicle Details -->
                <div class="filter-category">
                    <h4 class="filter-category-title">
                        <i data-lucide="car" class="filter-category-icon"></i>
                        Vehicle Details
                    </h4>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label>Make</label>
                            <div class="multi-select-container">
                                <div class="multi-select-display" id="makeDisplay">
                                    <span>Select Makes</span>
                                    <i data-lucide="chevron-down"></i>
                                </div>
                                <div class="multi-select-options" id="makeOptions">
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Toyota" id="make-toyota">
                                        <label for="make-toyota">Toyota</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Honda" id="make-honda">
                                        <label for="make-honda">Honda</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Ford" id="make-ford">
                                        <label for="make-ford">Ford</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Tesla" id="make-tesla">
                                        <label for="make-tesla">Tesla</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="BMW" id="make-bmw">
                                        <label for="make-bmw">BMW</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Mercedes-Benz" id="make-mercedes">
                                        <label for="make-mercedes">Mercedes-Benz</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Chevrolet" id="make-chevrolet">
                                        <label for="make-chevrolet">Chevrolet</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Audi" id="make-audi">
                                        <label for="make-audi">Audi</label>
                                    </div>
                                </div>
                                <div class="selected-tags" id="makeSelectedTags"></div>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Body Type</label>
                            <select id="bodyTypeFilter">
                                <option value="">All Types</option>
                                <option value="Sedan">Sedan</option>
                                <option value="SUV">SUV</option>
                                <option value="Truck">Truck</option>
                                <option value="Coupe">Coupe</option>
                                <option value="Convertible">Convertible</option>
                                <option value="Hatchback">Hatchback</option>
                                <option value="Wagon">Wagon</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Fuel Type</label>
                            <select id="fuelTypeFilter">
                                <option value="">All Fuel Types</option>
                                <option value="Gasoline">Gasoline</option>
                                <option value="Hybrid">Hybrid</option>
                                <option value="Electric">Electric</option>
                                <option value="Diesel">Diesel</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Performance & Specs -->
                <div class="filter-category">
                    <h4 class="filter-category-title">
                        <i data-lucide="gauge" class="filter-category-icon"></i>
                        Performance & Specs
                    </h4>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label>Mileage Range</label>
                            <div class="range-slider">
                                <input type="range" id="mileageRange" min="0" max="200000" value="100000">
                                <div class="range-values">
                                    <span>0 mi</span>
                                    <span id="mileageValue">100,000 mi</span>
                                    <span>200,000+ mi</span>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Year Range</label>
                            <div class="range-slider">
                                <input type="range" id="yearRange" min="2010" max="2025" value="2020">
                                <div class="range-values">
                                    <span>2010</span>
                                    <span id="yearValue">2020</span>
                                    <span>2025</span>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Transmission</label>
                            <select id="transmissionFilter">
                                <option value="">All Transmissions</option>
                                <option value="Automatic">Automatic</option>
                                <option value="Manual">Manual</option>
                                <option value="CVT">CVT</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Drivetrain</label>
                            <select id="drivetrainFilter">
                                <option value="">All Drivetrains</option>
                                <option value="FWD">Front-Wheel Drive</option>
                                <option value="RWD">Rear-Wheel Drive</option>
                                <option value="AWD">All-Wheel Drive</option>
                                <option value="4WD">4-Wheel Drive</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Features & Options -->
                <div class="filter-category">
                    <h4 class="filter-category-title">
                        <i data-lucide="settings" class="filter-category-icon"></i>
                        Features & Options
                    </h4>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label>Key Features</label>
                            <div class="multi-select-container">
                                <div class="multi-select-display" id="featuresDisplay">
                                    <span>Select Features</span>
                                    <i data-lucide="chevron-down"></i>
                                </div>
                                <div class="multi-select-options" id="featuresOptions">
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Sunroof" id="feature-sunroof">
                                        <label for="feature-sunroof">Sunroof</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Leather Seats" id="feature-leather">
                                        <label for="feature-leather">Leather Seats</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Navigation" id="feature-nav">
                                        <label for="feature-nav">Navigation</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Backup Camera" id="feature-camera">
                                        <label for="feature-camera">Backup Camera</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Bluetooth" id="feature-bluetooth">
                                        <label for="feature-bluetooth">Bluetooth</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Heated Seats" id="feature-heated">
                                        <label for="feature-heated">Heated Seats</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Remote Start" id="feature-remote">
                                        <label for="feature-remote">Remote Start</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Apple CarPlay" id="feature-carplay">
                                        <label for="feature-carplay">Apple CarPlay</label>
                                    </div>
                                </div>
                                <div class="selected-tags" id="featuresSelectedTags"></div>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Condition</label>
                            <select id="conditionFilter">
                                <option value="">All Conditions</option>
                                <option value="New">New</option>
                                <option value="Used">Used</option>
                                <option value="Certified">Certified Pre-Owned</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Exterior Color</label>
                            <div class="multi-select-container">
                                <div class="multi-select-display" id="colorDisplay">
                                    <span>Select Colors</span>
                                    <i data-lucide="chevron-down"></i>
                                </div>
                                <div class="multi-select-options" id="colorOptions">
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Black" id="color-black">
                                        <label for="color-black">Black</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="White" id="color-white">
                                        <label for="color-white">White</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Silver" id="color-silver">
                                        <label for="color-silver">Silver</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Gray" id="color-gray">
                                        <label for="color-gray">Gray</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Red" id="color-red">
                                        <label for="color-red">Red</label>
                                    </div>
                                    <div class="multi-select-option">
                                        <input type="checkbox" value="Blue" id="color-blue">
                                        <label for="color-blue">Blue</label>
                                    </div>
                                </div>
                                <div class="selected-tags" id="colorSelectedTags"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Location & Availability -->
                <div class="filter-category">
                    <h4 class="filter-category-title">
                        <i data-lucide="map-pin" class="filter-category-icon"></i>
                        Location & Availability
                    </h4>
                    <div class="filter-grid">
                        <div class="filter-group">
                            <label>Search Radius</label>
                            <div class="range-slider">
                                <input type="range" id="radiusRange" min="10" max="500" value="50">
                                <div class="range-values">
                                    <span>10 mi</span>
                                    <span id="radiusValue">50 mi</span>
                                    <span>500+ mi</span>
                                </div>
                            </div>
                        </div>
                        <div class="filter-group">
                            <label>Days on Market</label>
                            <select id="daysOnMarketFilter">
                                <option value="">Any Time</option>
                                <option value="7">Last 7 days</option>
                                <option value="30">Last 30 days</option>
                                <option value="60">Last 60 days</option>
                                <option value="90">Last 90 days</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label>Price Reduced</label>
                            <select id="priceReducedFilter">
                                <option value="">All Listings</option>
                                <option value="true">Price Reduced Only</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Market Insights -->
    <section class="insights-section">
        <div class="container">
            <h3 class="section-title">Market Insights</h3>
            <div class="insights-grid">
                <div class="insight-card">
                    <div class="insight-header">
                        <i data-lucide="dollar-sign" class="insight-icon"></i>
                        <span class="change-indicator negative">-2.1%</span>
                    </div>
                    <div class="insight-value">$42,300</div>
                    <div class="insight-label">Avg. Price</div>
                </div>
                <div class="insight-card">
                    <div class="insight-header">
                        <i data-lucide="eye" class="insight-icon"></i>
                        <span class="change-indicator positive">+5.3%</span>
                    </div>
                    <div class="insight-value">12,847</div>
                    <div class="insight-label">Total Listings</div>
                </div>
                <div class="insight-card">
                    <div class="insight-header">
                        <i data-lucide="calendar" class="insight-icon"></i>
                        <span class="change-indicator negative">-12.5%</span>
                    </div>
                    <div class="insight-value">18 days</div>
                    <div class="insight-label">Avg. Days on Market</div>
                </div>
                <div class="insight-card">
                    <div class="insight-header">
                        <i data-lucide="trending-up" class="insight-icon"></i>
                        <span class="change-indicator positive">+8.2%</span>
                    </div>
                    <div class="insight-value">23%</div>
                    <div class="insight-label">Price Drops</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Filter Chips -->
    <section class="quick-filters-section">
        <div class="container">
            <div class="quick-filters-header">
                <h4 class="quick-filters-title">Quick Filters</h4>
                <button class="clear-quick-filters" id="clearQuickFilters" style="display: none;">Clear All</button>
            </div>
            <div class="quick-filters-chips">
                <button class="filter-chip" data-filter="price" data-value="25000" data-operator="max">
                    <span class="chip-icon">💰</span>
                    <span class="chip-text">Under $25k</span>
                </button>
                <button class="filter-chip" data-filter="mileage" data-value="50000" data-operator="max">
                    <span class="chip-icon">📊</span>
                    <span class="chip-text">Low Mileage (&lt;50k)</span>
                </button>
                <button class="filter-chip" data-filter="luxury" data-value="true">
                    <span class="chip-icon">⭐</span>
                    <span class="chip-text">Luxury Cars</span>
                </button>
                <button class="filter-chip" data-filter="fuel" data-value="electric,hybrid">
                    <span class="chip-icon">🔋</span>
                    <span class="chip-text">Electric/Hybrid</span>
                </button>
                <button class="filter-chip" data-filter="age" data-value="7" data-operator="max">
                    <span class="chip-icon">🆕</span>
                    <span class="chip-text">New Arrivals</span>
                </button>
                <button class="filter-chip" data-filter="condition" data-value="new">
                    <span class="chip-icon">✨</span>
                    <span class="chip-text">New Only</span>
                </button>
                <button class="filter-chip" data-filter="year" data-value="2022" data-operator="min">
                    <span class="chip-icon">📅</span>
                    <span class="chip-text">2022 & Newer</span>
                </button>
            </div>
            <div class="active-chips" id="activeChips" style="display: none;">
                <div class="active-chips-header">Active Filters:</div>
                <div class="active-chips-list" id="activeChipsList"></div>
            </div>
        </div>
    </section>

    <!-- Smart Recommendations -->
    <section class="recommendations-section" id="recommendationsSection" style="display: none;">
        <div class="container">
            <div class="recommendations-header">
                <h4 class="recommendations-title">🎯 Recommended For You</h4>
                <p class="recommendations-subtitle">Based on your search history and preferences</p>
            </div>
            <div class="recommendations-scroll">
                <div class="recommendations-cars" id="recommendationsCars">
                    <!-- Recommended cars will be populated here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Recently Viewed Cars -->
    <section class="recently-viewed-section" id="recentlyViewedSection" style="display: none;">
        <div class="container">
            <div class="recently-viewed-header">
                <h4 class="recently-viewed-title">Recently Viewed</h4>
                <button class="clear-recently-viewed" id="clearRecentlyViewed">Clear All</button>
            </div>
            <div class="recently-viewed-scroll">
                <div class="recently-viewed-cars" id="recentlyViewedCars">
                    <!-- Recently viewed cars will be populated here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Compare Bar -->
    <div class="compare-bar" id="compareBar" style="display: none;">
        <div class="container">
            <div class="compare-content">
                <div class="compare-info">
                    <span class="compare-icon">📊</span>
                    <span class="compare-text">Compare <span id="compareCount">0</span> cars</span>
                </div>
                <div class="compare-actions">
                    <button class="compare-btn" id="compareBtn" disabled>Compare Now</button>
                    <button class="clear-compare-btn" id="clearCompareBtn">Clear All</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Section -->
    <section class="results-section">
        <div class="container">
            <div class="results-header">
                <h3 class="results-title" id="resultsTitle">Loading Cars...</h3>
                <div class="results-controls">
                    <div class="view-toggle">
                        <button class="view-btn active" id="gridViewBtn" data-view="grid">
                            <i data-lucide="grid-3x3"></i>
                            Grid
                        </button>
                        <button class="view-btn" id="mapViewBtn" data-view="map">
                            <i data-lucide="map"></i>
                            Map
                        </button>
                    </div>
                    <select class="sort-select" id="sortSelect">
                        <option value="recommended" selected>🎯 Recommended For You</option>
                        <option value="best-value">💎 Best Value</option>
                        <option value="trending">📈 Trending Now</option>
                        <option value="price-low">Sort by Price: Low to High</option>
                        <option value="price-high">Sort by Price: High to Low</option>
                        <option value="mileage">Sort by Mileage</option>
                        <option value="year">Sort by Year</option>
                        <option value="days-market">Sort by Days on Market</option>
                        <option value="rating">Sort by Rating</option>
                    </select>
                </div>
            </div>
            
            <!-- Grid View -->
            <div class="cars-grid" id="carsGrid">
                <!-- Cars will be dynamically loaded here -->
            </div>
            
            <!-- Map View -->
            <div class="map-container" id="mapContainer" style="display: none;">
                <div id="carMap"></div>
            </div>
            
            <!-- No Results -->
            <div class="no-results" id="noResults" style="display: none;">
                <div class="no-results-icon">
                    <i data-lucide="search"></i>
                </div>
                <h3>No cars found</h3>
                <p>Try adjusting your search criteria or filters</p>
            </div>
        </div>
    </section>

    <!-- Mobile Filter Bottom Sheet -->
    <div class="mobile-filter-overlay" id="mobileFilterOverlay" style="display: none;">
        <div class="mobile-filter-sheet" id="mobileFilterSheet">
            <div class="mobile-filter-header">
                <div class="mobile-filter-handle"></div>
                <div class="mobile-filter-title-section">
                    <h3 class="mobile-filter-title">Filters</h3>
                    <button class="mobile-filter-close" id="mobileFilterClose">
                        <i data-lucide="x"></i>
                    </button>
                </div>
                <div class="mobile-filter-actions">
                    <button class="clear-all-mobile" id="clearAllMobile">Clear All</button>
                    <button class="apply-filters-mobile" id="applyFiltersMobile">Apply Filters</button>
                </div>
            </div>
            <div class="mobile-filter-content" id="mobileFilterContent">
                <!-- Mobile-optimized filters will be populated here -->
            </div>
        </div>
    </div>

    <!-- Car Detail Modal -->
    <div class="modal-overlay" id="carModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalCarTitle"></h2>
                <button class="modal-close" id="modalClose">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <div class="modal-body" id="modalCarContent">
                <!-- Car details will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="data/realistic-cars.js"></script>
    <script src="app.js"></script>
    <script>
        // Initialize Lucide icons after all scripts load
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
            }
        });
    </script>
</body>
</html>